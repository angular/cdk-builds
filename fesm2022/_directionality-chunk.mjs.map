{"version":3,"file":"_directionality-chunk.mjs","sources":["../../../../../k8-fastbuild-ST-199a4f3c4e20/bin/src/cdk/bidi/directionality.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {EventEmitter, Injectable, OnDestroy, inject, signal} from '@angular/core';\nimport {DIR_DOCUMENT} from './dir-document-token';\n\nexport type Direction = 'ltr' | 'rtl';\n\n/** Regex that matches locales with an RTL script. Taken from `goog.i18n.bidi.isRtlLanguage`. */\nconst RTL_LOCALE_PATTERN =\n  /^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;\n\n/** Resolves a string value to a specific direction. */\nexport function _resolveDirectionality(rawValue: string): Direction {\n  const value = rawValue?.toLowerCase() || '';\n\n  if (value === 'auto' && typeof navigator !== 'undefined' && navigator?.language) {\n    return RTL_LOCALE_PATTERN.test(navigator.language) ? 'rtl' : 'ltr';\n  }\n\n  return value === 'rtl' ? 'rtl' : 'ltr';\n}\n\n/**\n * The directionality (LTR / RTL) context for the application (or a subtree of it).\n * Exposes the current direction and a stream of direction changes.\n */\n@Injectable({providedIn: 'root'})\nexport class Directionality implements OnDestroy {\n  /** The current 'ltr' or 'rtl' value. */\n  get value() {\n    return this.valueSignal();\n  }\n\n  /**\n   * The current 'ltr' or 'rtl' value.\n   */\n  readonly valueSignal = signal<Direction>('ltr');\n\n  /** Stream that emits whenever the 'ltr' / 'rtl' state changes. */\n  readonly change = new EventEmitter<Direction>();\n\n  constructor(...args: unknown[]);\n\n  constructor() {\n    const _document = inject(DIR_DOCUMENT, {optional: true});\n\n    if (_document) {\n      const bodyDir = _document.body ? _document.body.dir : null;\n      const htmlDir = _document.documentElement ? _document.documentElement.dir : null;\n      this.valueSignal.set(_resolveDirectionality(bodyDir || htmlDir || 'ltr'));\n    }\n  }\n\n  ngOnDestroy() {\n    this.change.complete();\n  }\n}\n"],"names":["_resolveDirectionality","rawValue","value","toLowerCase","navigator","language","valueSignal","debugName","EventEmitter","constructor"],"mappings":";;;;;;;;;AAkBM,SAAAA,uBAAAC,QAAA,EAAA;AAGJ,EAAA,MAAIC,KAAA,GAAAD,QAAgB,EAAAE,WAAyB,EAAA,IAAA,EAAA;EAC3C,IAAAD,KAAA,+CAAiD,IAAAE,SAAA,EAAAC,QAAA,EAAA;;AAMrD;;AAKA;;;AAgBE,IAAA,OAAA,IAAA,CAAAC,WAAA,EAAA;;2CAOE,GAAA,CAAA;IAAAC,SAAA,EAAA;AAAA,GAAA,CAAA,GAAA,EAAA,CAAA,CAAA;AAGF,EAAA,MAAA,GAAA,IAAWC,YAAA,EAAA;AACTC,EAAAA,WAAAA,GAAA;;;;;;;oEA5B4B,IAAA,KAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}