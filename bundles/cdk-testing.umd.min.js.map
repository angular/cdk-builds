{"version":3,"sources":["src/cdk/cdk-testing.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ng","cdk","testing","tslib","this","tslib_1","TestKey","ComponentHarness","locatorFactory","prototype","host","__awaiter","__generator","_a","rootElement","documentRootLocatorFactory","locatorFor","arg","locatorForOptional","locatorForAll","forceStabilize","waitForTasksOutsideAngular","HarnessPredicate","harnessType","options","_predicates","_descriptions","_addBaseOptions","stringMatches","s","pattern","label","sent","test","add","description","predicate","push","addOption","name","option","undefined","item","filter","harnesses","results","_this","Promise","all","map","h","evaluate","_","i","harness","p","reduce","combined","current","getDescription","join","getSelector","_ancestor","split","part","trim","hostSelector","ancestor","selector","matchesSelector","HarnessEnvironment","rawRootElement","createTestElement","createEnvironment","getDocumentRoot","_b","_assertElementFound","apply","_assertHarnessFound","element","getAllRawElements","_getAllHarnesses","e","harnessLoaderFor","harnessLoaderForOptional","elements","harnessLoaderForAll","getHarness","getAllHarnesses","getChildLoader","getAllChildLoaders","createComponentHarness","harnessPredicate","Error","_getErrorForMissingHarness","restrictions","message","Object","defineProperty","value"],"mappings":"CAAC,SAAUA,EAAQC,GACI,iBAAZC,SAA0C,oBAAXC,OAAyBF,EAAQC,QAASE,QAAQ,UACtE,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAO,uBAAwB,CAAC,UAAW,SAAUJ,GACxEA,IAAzBD,EAASA,GAAUO,MAAsBC,GAAKR,EAAOQ,IAAM,GAAIR,EAAOQ,GAAGC,IAAMT,EAAOQ,GAAGC,KAAO,GAAIT,EAAOQ,GAAGC,IAAIC,QAAU,IAAKV,EAAOW,OAH7I,CAIEC,KAAM,SAAUV,EAASW,GAAW;;;;;;;OAclC,IAsZWC,EAtZPC,EAAkC,WAClC,SAASA,EAAiBC,GACtBJ,KAAKI,eAAiBA,EAkD1B,OA/CAD,EAAiBE,UAAUC,KAAO,WAC9B,OAAOL,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,MAAO,CAAC,EAAcT,KAAKI,eAAeM,kBAStDP,EAAiBE,UAAUM,2BAA6B,WACpD,OAAOX,KAAKI,eAAeO,8BAE/BR,EAAiBE,UAAUO,WAAa,SAAUC,GAC9C,OAAOb,KAAKI,eAAeQ,WAAWC,IAE1CV,EAAiBE,UAAUS,mBAAqB,SAAUD,GACtD,OAAOb,KAAKI,eAAeU,mBAAmBD,IAElDV,EAAiBE,UAAUU,cAAgB,SAAUF,GACjD,OAAOb,KAAKI,eAAeW,cAAcF,IAO7CV,EAAiBE,UAAUW,eAAiB,WACxC,OAAOf,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,MAAO,CAAC,EAAcT,KAAKI,eAAeY,uBAQtDb,EAAiBE,UAAUY,2BAA6B,WACpD,OAAOhB,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,MAAO,CAAC,EAAcT,KAAKI,eAAea,mCAI/Cd,EApD0B,GA0DjCe,EAAkC,WAClC,SAASA,EAAiBC,EAAaC,GACnCpB,KAAKmB,YAAcA,EACnBnB,KAAKqB,YAAc,GACnBrB,KAAKsB,cAAgB,GACrBtB,KAAKuB,gBAAgBH,GAoHzB,OA3GAF,EAAiBM,cAAgB,SAAUC,EAAGC,GAC1C,OAAOzB,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAaF,GAC7B,KAAK,EAED,OADAA,EAAIhB,EAAGmB,OACA,CAAC,EAAiC,iBAAZF,EAAuBD,IAAMC,EAAUA,EAAQG,KAAKJ,UAWrGP,EAAiBb,UAAUyB,IAAM,SAAUC,EAAaC,GAGpD,OAFAhC,KAAKsB,cAAcW,KAAKF,GACxB/B,KAAKqB,YAAYY,KAAKD,GACfhC,MAUXkB,EAAiBb,UAAU6B,UAAY,SAAUC,EAAMC,EAAQJ,GAM3D,YAHeK,IAAXD,GACApC,KAAK8B,IAAIK,EAAO,OAFU,iBAAXC,EAAsB,IAAOA,EAAS,IAAO,GAAKA,GAElC,SAAUE,GAAQ,OAAON,EAAUM,EAAMF,KAErEpC,MAOXkB,EAAiBb,UAAUkC,OAAS,SAAUC,GAC1C,OAAOvC,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IAAIyC,EACAC,EAAQ1C,KACZ,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAagB,QAAQC,IAAIJ,EAAUK,IAAI,SAAUC,GAAK,OAAOJ,EAAMK,SAASD,OAC5F,KAAK,EAED,OADAL,EAAUhC,EAAGmB,OACN,CAAC,EAAcY,EAAUD,OAAO,SAAUS,EAAGC,GAAK,OAAOR,EAAQQ,YAW5F/B,EAAiBb,UAAU0C,SAAW,SAAUG,GAC5C,OAAOjD,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAE3C,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAagB,QAAQC,IAAI5C,KAAKqB,YAAYwB,IAAI,SAAUM,GAAK,OAAOA,EAAED,OACtF,KAAK,EAED,MAAO,CAAC,EADEzC,EAAGmB,OACiBwB,OAAO,SAAUC,EAAUC,GAAW,OAAOD,GAAYC,IAAY,UAMvHpC,EAAiBb,UAAUkD,eAAiB,WACxC,OAAOvD,KAAKsB,cAAckC,KAAK,OAGnCtC,EAAiBb,UAAUoD,YAAc,WACrC,IAAIf,EAAQ1C,KACZ,OAAOA,KAAK0D,UAAUC,MAAM,KACvBd,IAAI,SAAUe,GAAQ,OAAQA,EAAKC,OAAS,IAAMnB,EAAMvB,YAAY2C,cAAcD,SAClFL,KAAK,MAGdtC,EAAiBb,UAAUkB,gBAAkB,SAAUH,GACnD,IAAIsB,EAAQ1C,KACZA,KAAK0D,UAAYtC,EAAQ2C,UAAY,GACjC/D,KAAK0D,WACL1D,KAAKsB,cAAcW,KAAK,mCAAsCjC,KAAK0D,UAAY,KAEnF,IAAIM,EAAW5C,EAAQ4C,cACN3B,IAAb2B,GACAhE,KAAK8B,IAAI,0BAA6BkC,EAAW,IAAM,SAAU1B,GAAQ,OAAOrC,EAAQM,UAAUmC,OAAO,OAAQ,EAAQ,WACrH,OAAOzC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAaW,EAAKhC,QAClC,KAAK,EAAG,MAAO,CAAC,EAAeG,EAAGmB,OAAQqC,gBAAgBD,YAMvE9C,EAzH0B,GAyIjCgD,EAAoC,WACpC,SAASA,EAAmBC,GACxBnE,KAAKmE,eAAiBA,EACtBnE,KAAKU,YAAcV,KAAKoE,kBAAkBD,GA2L9C,OAxLAD,EAAmB7D,UAAUM,2BAA6B,WACtD,OAAOX,KAAKqE,kBAAkBrE,KAAKsE,oBAEvCJ,EAAmB7D,UAAUO,WAAa,SAAUC,GAChD,IAAI6B,EAAQ1C,KACZ,OAAO,WAAc,OAAOC,EAAQM,UAAUmC,OAAO,OAAQ,EAAQ,WACjE,IAAIjC,EACJ,OAAOR,EAAQO,YAAYR,KAAM,SAAUuE,GACvC,OAAQA,EAAG5C,OACP,KAAK,EACD,MAAqB,iBAARd,EAA0B,CAAC,EAAa,IACrDJ,EAAKT,KAAKoE,kBACH,CAAC,EAAapE,KAAKwE,oBAAoB3D,KAClD,KAAK,EAAG,MAAO,CAAC,EAAcJ,EAAGgE,MAAMzE,KAAM,CAACuE,EAAG3C,UACjD,KAAK,EAAG,MAAO,CAAC,EAAc5B,KAAK0E,oBAAoB7D,WAKvEqD,EAAmB7D,UAAUS,mBAAqB,SAAUD,GACxD,IAAI6B,EAAQ1C,KACZ,OAAO,WAAc,OAAOC,EAAQM,UAAUmC,OAAO,OAAQ,EAAQ,WACjE,IAAIiC,EACJ,OAAO1E,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EACD,MAAqB,iBAARd,EAA0B,CAAC,EAAa,GAC9C,CAAC,EAAab,KAAK4E,kBAAkB/D,IAChD,KAAK,EAED,MAAO,CAAC,GADR8D,EAAWlE,EAAGmB,OAAQ,IACU5B,KAAKoE,kBAAkBO,GAAW,MACtE,KAAK,EAAG,MAAO,CAAC,EAAa3E,KAAK6E,iBAAiBhE,IACnD,KAAK,EAED,MAAO,CAAC,EADKJ,EAAGmB,OACiB,IAAM,aAK3DsC,EAAmB7D,UAAUU,cAAgB,SAAUF,GACnD,IAAI6B,EAAQ1C,KACZ,OAAO,WAAc,OAAOC,EAAQM,UAAUmC,OAAO,OAAQ,EAAQ,WACjE,IAAIA,EAAQ1C,KACZ,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EACD,MAAqB,iBAARd,EAA0B,CAAC,EAAa,GAC9C,CAAC,EAAab,KAAK4E,kBAAkB/D,IAChD,KAAK,EAAG,MAAO,CAAC,EAAeJ,EAAGmB,OAAQiB,IAAI,SAAUiC,GAAK,OAAOpC,EAAM0B,kBAAkBU,MAC5F,KAAK,EAAG,MAAO,CAAC,EAAc9E,KAAK6E,iBAAiBhE,WAMpEqD,EAAmB7D,UAAU0E,iBAAmB,SAAUf,GACtD,OAAO/D,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IAAIS,EACJ,OAAOR,EAAQO,YAAYR,KAAM,SAAUuE,GACvC,OAAQA,EAAG5C,OACP,KAAK,EAED,OADAlB,EAAKT,KAAKqE,kBACH,CAAC,EAAarE,KAAKwE,oBAAoBR,IAClD,KAAK,EAAG,MAAO,CAAC,EAAcvD,EAAGgE,MAAMzE,KAAM,CAACuE,EAAG3C,gBAMjEsC,EAAmB7D,UAAU2E,yBAA2B,SAAUhB,GAC9D,OAAO/D,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IAAIiF,EACJ,OAAOhF,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3B,KAAK4E,kBAAkBZ,IACpD,KAAK,EAED,MAAO,CAAC,GADRiB,EAAWxE,EAAGmB,QACiB,GAAK5B,KAAKqE,kBAAkBY,EAAS,IAAM,YAM9Ff,EAAmB7D,UAAU6E,oBAAsB,SAAUlB,GACzD,OAAO/D,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IACI0C,EAAQ1C,KACZ,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3B,KAAK4E,kBAAkBZ,IACpD,KAAK,EAED,MAAO,CAAC,EADGvD,EAAGmB,OACiBiB,IAAI,SAAU8B,GAAW,OAAOjC,EAAM2B,kBAAkBM,YAM3GT,EAAmB7D,UAAU8E,WAAa,SAAUhE,GAChD,OAAOnB,KAAKY,WAAWO,EAAhBnB,IAGXkE,EAAmB7D,UAAU+E,gBAAkB,SAAUjE,GACrD,OAAOnB,KAAKe,cAAcI,EAAnBnB,IAGXkE,EAAmB7D,UAAUgF,eAAiB,SAAUrB,GACpD,OAAO/D,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IAAIS,EACJ,OAAOR,EAAQO,YAAYR,KAAM,SAAUuE,GACvC,OAAQA,EAAG5C,OACP,KAAK,EAED,OADAlB,EAAKT,KAAKqE,kBACH,CAAC,EAAarE,KAAKwE,oBAAoBR,IAClD,KAAK,EAAG,MAAO,CAAC,EAAcvD,EAAGgE,MAAMzE,KAAM,CAACuE,EAAG3C,gBAMjEsC,EAAmB7D,UAAUiF,mBAAqB,SAAUtB,GACxD,OAAO/D,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IAAI0C,EAAQ1C,KACZ,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3B,KAAK4E,kBAAkBZ,IACpD,KAAK,EAAG,MAAO,CAAC,EAAevD,EAAGmB,OAAQiB,IAAI,SAAUiC,GAAK,OAAOpC,EAAM2B,kBAAkBS,YAM5GZ,EAAmB7D,UAAUkF,uBAAyB,SAAUpE,EAAawD,GACzE,OAAO,IAAIxD,EAAYnB,KAAKqE,kBAAkBM,KAElDT,EAAmB7D,UAAUwE,iBAAmB,SAAU1D,GACtD,OAAOlB,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IAAIwF,EAAkBP,EAClBvC,EAAQ1C,KACZ,OAAOC,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAGD,OAFA6D,EAAmBrE,aAAuBD,EACtCC,EAAc,IAAID,EAAiBC,EAAa,IAC7C,CAAC,EAAanB,KAAK4E,kBAAkBY,EAAiB/B,gBACjE,KAAK,EAED,OADAwB,EAAWxE,EAAGmB,OACP,CAAC,EAAc4D,EAAiBjD,OAAO0C,EAASpC,IAAI,SAAU8B,GAAW,OAAOjC,EAAM6C,uBAAuBC,EAAiBrE,YAAawD,aAKtKT,EAAmB7D,UAAUmE,oBAAsB,SAAUR,GACzD,OAAO/D,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IAAI2E,EACJ,OAAO1E,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3B,KAAK4E,kBAAkBZ,IACpD,KAAK,EAED,KADAW,EAAWlE,EAAGmB,OAAQ,IAElB,MAAM6D,MAAM,gDAAmDzB,EAAW,yBAE9E,MAAO,CAAC,EAAcW,SAK1CT,EAAmB7D,UAAUqE,oBAAsB,SAAUvD,GACzD,OAAOlB,EAAQM,UAAUP,UAAM,OAAQ,EAAQ,WAC3C,IAAIkD,EACJ,OAAOjD,EAAQO,YAAYR,KAAM,SAAUS,GACvC,OAAQA,EAAGkB,OACP,KAAK,EAAG,MAAO,CAAC,EAAa3B,KAAK6E,iBAAiB1D,IACnD,KAAK,EAED,KADA+B,EAAWzC,EAAGmB,OAAQ,IAElB,MAS5B,SAAS8D,EAA2BvE,GAChC,IAAIqE,EAAmBrE,aAAuBD,EAAmBC,EAAc,IAAID,EAAiBC,EAAa,IAC7GV,EAAK+E,EAAiBrE,YAAagB,EAAO1B,EAAG0B,KAAM2B,EAAerD,EAAGqD,aACrE6B,EAAeH,EAAiBjC,iBAChCqC,EAAU,gCAAkCzD,EAAO,wBAA2B2B,EAAe,IAKjG,OAJI6B,IACAC,GAAW,wBAA0BD,EAAe,KAExDC,GAAW,uBACJH,MAAMG;;;;;;;OAlBiBF,CAA2BvE,GAErC,MAAO,CAAC,EAAc+B,SAKnCgB,EA9L4B;;;;;;;;AAmN5BhE,EA+BRZ,EAAQY,UAAYZ,EAAQY,QAAU,KA9B7BA,EAAmB,UAAI,GAAK,YACpCA,EAAQA,EAAa,IAAI,GAAK,MAC9BA,EAAQA,EAAe,MAAI,GAAK,QAChCA,EAAQA,EAAe,MAAI,GAAK,QAChCA,EAAQA,EAAiB,QAAI,GAAK,UAClCA,EAAQA,EAAa,IAAI,GAAK,MAC9BA,EAAQA,EAAgB,OAAI,GAAK,SACjCA,EAAQA,EAAiB,QAAI,GAAK,UAClCA,EAAQA,EAAmB,UAAI,GAAK,YACpCA,EAAQA,EAAa,IAAI,GAAK,MAC9BA,EAAQA,EAAc,KAAI,IAAM,OAChCA,EAAQA,EAAoB,WAAI,IAAM,aACtCA,EAAQA,EAAkB,SAAI,IAAM,WACpCA,EAAQA,EAAqB,YAAI,IAAM,cACvCA,EAAQA,EAAoB,WAAI,IAAM,aACtCA,EAAQA,EAAgB,OAAI,IAAM,SAClCA,EAAQA,EAAgB,OAAI,IAAM,SAClCA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAY,GAAI,IAAM,KAC9BA,EAAQA,EAAa,IAAI,IAAM,MAC/BA,EAAQA,EAAa,IAAI,IAAM,MAC/BA,EAAQA,EAAa,IAAI,IAAM,MAC/BA,EAAQA,EAAc,KAAI,IAAM;;;;;;;;;;;;;;;AAmBpCZ,EAAQa,iBAAmBA,EAC3Bb,EAAQ4B,iBAAmBA,EAC3B5B,EAAQ4E,mBAAqBA,EAE7B2B,OAAOC,eAAexG,EAAS,aAAc,CAAEyG,OAAO","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('tslib')) :\n    typeof define === 'function' && define.amd ? define('@angular/cdk/testing', ['exports', 'tslib'], factory) :\n    (global = global || self, factory((global.ng = global.ng || {}, global.ng.cdk = global.ng.cdk || {}, global.ng.cdk.testing = {}), global.tslib));\n}(this, function (exports, tslib_1) { 'use strict';\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Base class for component harnesses that all component harness authors should extend. This base\n     * component harness provides the basic ability to locate element and sub-component harness. It\n     * should be inherited when defining user's own harness.\n     */\n    var ComponentHarness = /** @class */ (function () {\n        function ComponentHarness(locatorFactory) {\n            this.locatorFactory = locatorFactory;\n        }\n        /** Gets a `Promise` for the `TestElement` representing the host element of the component. */\n        ComponentHarness.prototype.host = function () {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                return tslib_1.__generator(this, function (_a) {\n                    return [2 /*return*/, this.locatorFactory.rootElement];\n                });\n            });\n        };\n        /**\n         * Gets a `LocatorFactory` for the document root element. This factory can be used to create\n         * locators for elements that a component creates outside of its own root element. (e.g. by\n         * appending to document.body).\n         */\n        ComponentHarness.prototype.documentRootLocatorFactory = function () {\n            return this.locatorFactory.documentRootLocatorFactory();\n        };\n        ComponentHarness.prototype.locatorFor = function (arg) {\n            return this.locatorFactory.locatorFor(arg);\n        };\n        ComponentHarness.prototype.locatorForOptional = function (arg) {\n            return this.locatorFactory.locatorForOptional(arg);\n        };\n        ComponentHarness.prototype.locatorForAll = function (arg) {\n            return this.locatorFactory.locatorForAll(arg);\n        };\n        /**\n         * Flushes change detection and async tasks in the Angular zone.\n         * In most cases it should not be necessary to call this manually. However, there may be some edge\n         * cases where it is needed to fully flush animation events.\n         */\n        ComponentHarness.prototype.forceStabilize = function () {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                return tslib_1.__generator(this, function (_a) {\n                    return [2 /*return*/, this.locatorFactory.forceStabilize()];\n                });\n            });\n        };\n        /**\n         * Waits for all scheduled or running async tasks to complete. This allows harness\n         * authors to wait for async tasks outside of the Angular zone.\n         */\n        ComponentHarness.prototype.waitForTasksOutsideAngular = function () {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                return tslib_1.__generator(this, function (_a) {\n                    return [2 /*return*/, this.locatorFactory.waitForTasksOutsideAngular()];\n                });\n            });\n        };\n        return ComponentHarness;\n    }());\n    /**\n     * A class used to associate a ComponentHarness class with predicates functions that can be used to\n     * filter instances of the class.\n     */\n    var HarnessPredicate = /** @class */ (function () {\n        function HarnessPredicate(harnessType, options) {\n            this.harnessType = harnessType;\n            this._predicates = [];\n            this._descriptions = [];\n            this._addBaseOptions(options);\n        }\n        /**\n         * Checks if a string matches the given pattern.\n         * @param s The string to check, or a Promise for the string to check.\n         * @param pattern The pattern the string is expected to match. If `pattern` is a string, `s` is\n         *   expected to match exactly. If `pattern` is a regex, a partial match is allowed.\n         * @return A Promise that resolves to whether the string matches the pattern.\n         */\n        HarnessPredicate.stringMatches = function (s, pattern) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, s];\n                        case 1:\n                            s = _a.sent();\n                            return [2 /*return*/, typeof pattern === 'string' ? s === pattern : pattern.test(s)];\n                    }\n                });\n            });\n        };\n        /**\n         * Adds a predicate function to be run against candidate harnesses.\n         * @param description A description of this predicate that may be used in error messages.\n         * @param predicate An async predicate function.\n         * @return this (for method chaining).\n         */\n        HarnessPredicate.prototype.add = function (description, predicate) {\n            this._descriptions.push(description);\n            this._predicates.push(predicate);\n            return this;\n        };\n        /**\n         * Adds a predicate function that depends on an option value to be run against candidate\n         * harnesses. If the option value is undefined, the predicate will be ignored.\n         * @param name The name of the option (may be used in error messages).\n         * @param option The option value.\n         * @param predicate The predicate function to run if the option value is not undefined.\n         * @return this (for method chaining).\n         */\n        HarnessPredicate.prototype.addOption = function (name, option, predicate) {\n            // Add quotes around strings to differentiate them from other values\n            var value = typeof option === 'string' ? \"\\\"\" + option + \"\\\"\" : \"\" + option;\n            if (option !== undefined) {\n                this.add(name + \" = \" + value, function (item) { return predicate(item, option); });\n            }\n            return this;\n        };\n        /**\n         * Filters a list of harnesses on this predicate.\n         * @param harnesses The list of harnesses to filter.\n         * @return A list of harnesses that satisfy this predicate.\n         */\n        HarnessPredicate.prototype.filter = function (harnesses) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var results;\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, Promise.all(harnesses.map(function (h) { return _this.evaluate(h); }))];\n                        case 1:\n                            results = _a.sent();\n                            return [2 /*return*/, harnesses.filter(function (_, i) { return results[i]; })];\n                    }\n                });\n            });\n        };\n        /**\n         * Evaluates whether the given harness satisfies this predicate.\n         * @param harness The harness to check\n         * @return A promise that resolves to true if the harness satisfies this predicate,\n         *   and resolves to false otherwise.\n         */\n        HarnessPredicate.prototype.evaluate = function (harness) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var results;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, Promise.all(this._predicates.map(function (p) { return p(harness); }))];\n                        case 1:\n                            results = _a.sent();\n                            return [2 /*return*/, results.reduce(function (combined, current) { return combined && current; }, true)];\n                    }\n                });\n            });\n        };\n        /** Gets a description of this predicate for use in error messages. */\n        HarnessPredicate.prototype.getDescription = function () {\n            return this._descriptions.join(', ');\n        };\n        /** Gets the selector used to find candidate elements. */\n        HarnessPredicate.prototype.getSelector = function () {\n            var _this = this;\n            return this._ancestor.split(',')\n                .map(function (part) { return (part.trim() + \" \" + _this.harnessType.hostSelector).trim(); })\n                .join(',');\n        };\n        /** Adds base options common to all harness types. */\n        HarnessPredicate.prototype._addBaseOptions = function (options) {\n            var _this = this;\n            this._ancestor = options.ancestor || '';\n            if (this._ancestor) {\n                this._descriptions.push(\"has ancestor matching selector \\\"\" + this._ancestor + \"\\\"\");\n            }\n            var selector = options.selector;\n            if (selector !== undefined) {\n                this.add(\"host matches selector \\\"\" + selector + \"\\\"\", function (item) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                    return tslib_1.__generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [4 /*yield*/, item.host()];\n                            case 1: return [2 /*return*/, (_a.sent()).matchesSelector(selector)];\n                        }\n                    });\n                }); });\n            }\n        };\n        return HarnessPredicate;\n    }());\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Base harness environment class that can be extended to allow `ComponentHarness`es to be used in\n     * different test environments (e.g. testbed, protractor, etc.). This class implements the\n     * functionality of both a `HarnessLoader` and `LocatorFactory`. This class is generic on the raw\n     * element type, `E`, used by the particular test environment.\n     */\n    var HarnessEnvironment = /** @class */ (function () {\n        function HarnessEnvironment(rawRootElement) {\n            this.rawRootElement = rawRootElement;\n            this.rootElement = this.createTestElement(rawRootElement);\n        }\n        // Implemented as part of the `LocatorFactory` interface.\n        HarnessEnvironment.prototype.documentRootLocatorFactory = function () {\n            return this.createEnvironment(this.getDocumentRoot());\n        };\n        HarnessEnvironment.prototype.locatorFor = function (arg) {\n            var _this = this;\n            return function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var _a;\n                return tslib_1.__generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            if (!(typeof arg === 'string')) return [3 /*break*/, 2];\n                            _a = this.createTestElement;\n                            return [4 /*yield*/, this._assertElementFound(arg)];\n                        case 1: return [2 /*return*/, _a.apply(this, [_b.sent()])];\n                        case 2: return [2 /*return*/, this._assertHarnessFound(arg)];\n                    }\n                });\n            }); };\n        };\n        HarnessEnvironment.prototype.locatorForOptional = function (arg) {\n            var _this = this;\n            return function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var element, candidates;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!(typeof arg === 'string')) return [3 /*break*/, 2];\n                            return [4 /*yield*/, this.getAllRawElements(arg)];\n                        case 1:\n                            element = (_a.sent())[0];\n                            return [2 /*return*/, element ? this.createTestElement(element) : null];\n                        case 2: return [4 /*yield*/, this._getAllHarnesses(arg)];\n                        case 3:\n                            candidates = _a.sent();\n                            return [2 /*return*/, candidates[0] || null];\n                    }\n                });\n            }); };\n        };\n        HarnessEnvironment.prototype.locatorForAll = function (arg) {\n            var _this = this;\n            return function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!(typeof arg === 'string')) return [3 /*break*/, 2];\n                            return [4 /*yield*/, this.getAllRawElements(arg)];\n                        case 1: return [2 /*return*/, (_a.sent()).map(function (e) { return _this.createTestElement(e); })];\n                        case 2: return [2 /*return*/, this._getAllHarnesses(arg)];\n                    }\n                });\n            }); };\n        };\n        // Implemented as part of the `LocatorFactory` interface.\n        HarnessEnvironment.prototype.harnessLoaderFor = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var _a;\n                return tslib_1.__generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _a = this.createEnvironment;\n                            return [4 /*yield*/, this._assertElementFound(selector)];\n                        case 1: return [2 /*return*/, _a.apply(this, [_b.sent()])];\n                    }\n                });\n            });\n        };\n        // Implemented as part of the `LocatorFactory` interface.\n        HarnessEnvironment.prototype.harnessLoaderForOptional = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var elements;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.getAllRawElements(selector)];\n                        case 1:\n                            elements = _a.sent();\n                            return [2 /*return*/, elements[0] ? this.createEnvironment(elements[0]) : null];\n                    }\n                });\n            });\n        };\n        // Implemented as part of the `LocatorFactory` interface.\n        HarnessEnvironment.prototype.harnessLoaderForAll = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var elements;\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.getAllRawElements(selector)];\n                        case 1:\n                            elements = _a.sent();\n                            return [2 /*return*/, elements.map(function (element) { return _this.createEnvironment(element); })];\n                    }\n                });\n            });\n        };\n        // Implemented as part of the `HarnessLoader` interface.\n        HarnessEnvironment.prototype.getHarness = function (harnessType) {\n            return this.locatorFor(harnessType)();\n        };\n        // Implemented as part of the `HarnessLoader` interface.\n        HarnessEnvironment.prototype.getAllHarnesses = function (harnessType) {\n            return this.locatorForAll(harnessType)();\n        };\n        // Implemented as part of the `HarnessLoader` interface.\n        HarnessEnvironment.prototype.getChildLoader = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var _a;\n                return tslib_1.__generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _a = this.createEnvironment;\n                            return [4 /*yield*/, this._assertElementFound(selector)];\n                        case 1: return [2 /*return*/, _a.apply(this, [_b.sent()])];\n                    }\n                });\n            });\n        };\n        // Implemented as part of the `HarnessLoader` interface.\n        HarnessEnvironment.prototype.getAllChildLoaders = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.getAllRawElements(selector)];\n                        case 1: return [2 /*return*/, (_a.sent()).map(function (e) { return _this.createEnvironment(e); })];\n                    }\n                });\n            });\n        };\n        /** Creates a `ComponentHarness` for the given harness type with the given raw host element. */\n        HarnessEnvironment.prototype.createComponentHarness = function (harnessType, element) {\n            return new harnessType(this.createEnvironment(element));\n        };\n        HarnessEnvironment.prototype._getAllHarnesses = function (harnessType) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var harnessPredicate, elements;\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            harnessPredicate = harnessType instanceof HarnessPredicate ?\n                                harnessType : new HarnessPredicate(harnessType, {});\n                            return [4 /*yield*/, this.getAllRawElements(harnessPredicate.getSelector())];\n                        case 1:\n                            elements = _a.sent();\n                            return [2 /*return*/, harnessPredicate.filter(elements.map(function (element) { return _this.createComponentHarness(harnessPredicate.harnessType, element); }))];\n                    }\n                });\n            });\n        };\n        HarnessEnvironment.prototype._assertElementFound = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var element;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.getAllRawElements(selector)];\n                        case 1:\n                            element = (_a.sent())[0];\n                            if (!element) {\n                                throw Error(\"Expected to find element matching selector: \\\"\" + selector + \"\\\", but none was found\");\n                            }\n                            return [2 /*return*/, element];\n                    }\n                });\n            });\n        };\n        HarnessEnvironment.prototype._assertHarnessFound = function (harnessType) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var harness;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this._getAllHarnesses(harnessType)];\n                        case 1:\n                            harness = (_a.sent())[0];\n                            if (!harness) {\n                                throw _getErrorForMissingHarness(harnessType);\n                            }\n                            return [2 /*return*/, harness];\n                    }\n                });\n            });\n        };\n        return HarnessEnvironment;\n    }());\n    function _getErrorForMissingHarness(harnessType) {\n        var harnessPredicate = harnessType instanceof HarnessPredicate ? harnessType : new HarnessPredicate(harnessType, {});\n        var _a = harnessPredicate.harnessType, name = _a.name, hostSelector = _a.hostSelector;\n        var restrictions = harnessPredicate.getDescription();\n        var message = \"Expected to find element for \" + name + \" matching selector: \\\"\" + hostSelector + \"\\\"\";\n        if (restrictions) {\n            message += \" (with restrictions: \" + restrictions + \")\";\n        }\n        message += ', but none was found';\n        return Error(message);\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    (function (TestKey) {\n        TestKey[TestKey[\"BACKSPACE\"] = 0] = \"BACKSPACE\";\n        TestKey[TestKey[\"TAB\"] = 1] = \"TAB\";\n        TestKey[TestKey[\"ENTER\"] = 2] = \"ENTER\";\n        TestKey[TestKey[\"SHIFT\"] = 3] = \"SHIFT\";\n        TestKey[TestKey[\"CONTROL\"] = 4] = \"CONTROL\";\n        TestKey[TestKey[\"ALT\"] = 5] = \"ALT\";\n        TestKey[TestKey[\"ESCAPE\"] = 6] = \"ESCAPE\";\n        TestKey[TestKey[\"PAGE_UP\"] = 7] = \"PAGE_UP\";\n        TestKey[TestKey[\"PAGE_DOWN\"] = 8] = \"PAGE_DOWN\";\n        TestKey[TestKey[\"END\"] = 9] = \"END\";\n        TestKey[TestKey[\"HOME\"] = 10] = \"HOME\";\n        TestKey[TestKey[\"LEFT_ARROW\"] = 11] = \"LEFT_ARROW\";\n        TestKey[TestKey[\"UP_ARROW\"] = 12] = \"UP_ARROW\";\n        TestKey[TestKey[\"RIGHT_ARROW\"] = 13] = \"RIGHT_ARROW\";\n        TestKey[TestKey[\"DOWN_ARROW\"] = 14] = \"DOWN_ARROW\";\n        TestKey[TestKey[\"INSERT\"] = 15] = \"INSERT\";\n        TestKey[TestKey[\"DELETE\"] = 16] = \"DELETE\";\n        TestKey[TestKey[\"F1\"] = 17] = \"F1\";\n        TestKey[TestKey[\"F2\"] = 18] = \"F2\";\n        TestKey[TestKey[\"F3\"] = 19] = \"F3\";\n        TestKey[TestKey[\"F4\"] = 20] = \"F4\";\n        TestKey[TestKey[\"F5\"] = 21] = \"F5\";\n        TestKey[TestKey[\"F6\"] = 22] = \"F6\";\n        TestKey[TestKey[\"F7\"] = 23] = \"F7\";\n        TestKey[TestKey[\"F8\"] = 24] = \"F8\";\n        TestKey[TestKey[\"F9\"] = 25] = \"F9\";\n        TestKey[TestKey[\"F10\"] = 26] = \"F10\";\n        TestKey[TestKey[\"F11\"] = 27] = \"F11\";\n        TestKey[TestKey[\"F12\"] = 28] = \"F12\";\n        TestKey[TestKey[\"META\"] = 29] = \"META\";\n    })(exports.TestKey || (exports.TestKey = {}));\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    exports.ComponentHarness = ComponentHarness;\n    exports.HarnessPredicate = HarnessPredicate;\n    exports.HarnessEnvironment = HarnessEnvironment;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=cdk-testing.umd.js.map\n"]}