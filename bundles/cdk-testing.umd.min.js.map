{"version":3,"sources":["src/cdk/cdk-testing.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ng","cdk","testing","tslib","this","tslib_1","ComponentHarness","locatorFactory","prototype","host","__awaiter","__generator","_a","rootElement","documentRootLocatorFactory","locatorFor","arg","locatorForOptional","locatorForAll","forceStabilize","waitForTasksOutsideAngular","HarnessPredicate","harnessType","options","_predicates","_descriptions","_addBaseOptions","stringMatches","s","pattern","label","sent","test","add","description","predicate","push","addOption","name","option","undefined","item","filter","harnesses","results","_this","Promise","all","map","h","evaluate","_","i","harness","p","reduce","combined","current","getDescription","join","getSelector","_ancestor","split","part","trim","hostSelector","ancestor","selector","matchesSelector","createMouseEvent","type","x","y","button","event","document","createEvent","originalPreventDefault","preventDefault","initMouseEvent","window","Object","defineProperty","get","apply","arguments","createTouchEvent","pageX","pageY","touchDetails","initUIEvent","defineProperties","touches","value","targetTouches","changedTouches","createKeyboardEvent","keyCode","key","target","modifiers","initKeyEvent","control","alt","shift","meta","modifiersStr","initKeyboardEvent","ctrlKey","altKey","shiftKey","metaKey","createFakeEvent","canBubble","cancelable","initEvent","dispatchEvent","node","dispatchFakeEvent","dispatchKeyboardEvent","triggerFocusChange","element","eventFired","handler","addEventListener","removeEventListener","triggerFocus","TestKey","HarnessEnvironment","rawRootElement","createTestElement","createEnvironment","getDocumentRoot","_b","_assertElementFound","_assertHarnessFound","getAllRawElements","_getAllHarnesses","e","harnessLoaderFor","harnessLoaderForOptional","elements","harnessLoaderForAll","getHarness","getAllHarnesses","getChildLoader","getAllChildLoaders","createComponentHarness","harnessPredicate","Error","_getErrorForMissingHarness","restrictions","message","isTextInput","nodeName","toLowerCase","dispatchMouseEvent","dispatchTouchEvent","patchElementFocus","focus","blur","triggerBlur","typeInElement","e_1","modifiersAndKeys","_i","length","rest","first","slice","keys","k","c","toUpperCase","charCodeAt","arr","concat","keys_1","__values","keys_1_1","next","done","e_1_1","error","return","call","clearElement"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('tslib')) :\n    typeof define === 'function' && define.amd ? define('@angular/cdk/testing', ['exports', 'tslib'], factory) :\n    (global = global || self, factory((global.ng = global.ng || {}, global.ng.cdk = global.ng.cdk || {}, global.ng.cdk.testing = {}), global.tslib));\n}(this, function (exports, tslib_1) { 'use strict';\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Base class for component harnesses that all component harness authors should extend. This base\n     * component harness provides the basic ability to locate element and sub-component harness. It\n     * should be inherited when defining user's own harness.\n     */\n    var ComponentHarness = /** @class */ (function () {\n        function ComponentHarness(locatorFactory) {\n            this.locatorFactory = locatorFactory;\n        }\n        /** Gets a `Promise` for the `TestElement` representing the host element of the component. */\n        ComponentHarness.prototype.host = function () {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                return tslib_1.__generator(this, function (_a) {\n                    return [2 /*return*/, this.locatorFactory.rootElement];\n                });\n            });\n        };\n        /**\n         * Gets a `LocatorFactory` for the document root element. This factory can be used to create\n         * locators for elements that a component creates outside of its own root element. (e.g. by\n         * appending to document.body).\n         */\n        ComponentHarness.prototype.documentRootLocatorFactory = function () {\n            return this.locatorFactory.documentRootLocatorFactory();\n        };\n        ComponentHarness.prototype.locatorFor = function (arg) {\n            return this.locatorFactory.locatorFor(arg);\n        };\n        ComponentHarness.prototype.locatorForOptional = function (arg) {\n            return this.locatorFactory.locatorForOptional(arg);\n        };\n        ComponentHarness.prototype.locatorForAll = function (arg) {\n            return this.locatorFactory.locatorForAll(arg);\n        };\n        /**\n         * Flushes change detection and async tasks in the Angular zone.\n         * In most cases it should not be necessary to call this manually. However, there may be some edge\n         * cases where it is needed to fully flush animation events.\n         */\n        ComponentHarness.prototype.forceStabilize = function () {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                return tslib_1.__generator(this, function (_a) {\n                    return [2 /*return*/, this.locatorFactory.forceStabilize()];\n                });\n            });\n        };\n        /**\n         * Waits for all scheduled or running async tasks to complete. This allows harness\n         * authors to wait for async tasks outside of the Angular zone.\n         */\n        ComponentHarness.prototype.waitForTasksOutsideAngular = function () {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                return tslib_1.__generator(this, function (_a) {\n                    return [2 /*return*/, this.locatorFactory.waitForTasksOutsideAngular()];\n                });\n            });\n        };\n        return ComponentHarness;\n    }());\n    /**\n     * A class used to associate a ComponentHarness class with predicates functions that can be used to\n     * filter instances of the class.\n     */\n    var HarnessPredicate = /** @class */ (function () {\n        function HarnessPredicate(harnessType, options) {\n            this.harnessType = harnessType;\n            this._predicates = [];\n            this._descriptions = [];\n            this._addBaseOptions(options);\n        }\n        /**\n         * Checks if a string matches the given pattern.\n         * @param s The string to check, or a Promise for the string to check.\n         * @param pattern The pattern the string is expected to match. If `pattern` is a string, `s` is\n         *   expected to match exactly. If `pattern` is a regex, a partial match is allowed.\n         * @return A Promise that resolves to whether the string matches the pattern.\n         */\n        HarnessPredicate.stringMatches = function (s, pattern) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, s];\n                        case 1:\n                            s = _a.sent();\n                            return [2 /*return*/, typeof pattern === 'string' ? s === pattern : pattern.test(s)];\n                    }\n                });\n            });\n        };\n        /**\n         * Adds a predicate function to be run against candidate harnesses.\n         * @param description A description of this predicate that may be used in error messages.\n         * @param predicate An async predicate function.\n         * @return this (for method chaining).\n         */\n        HarnessPredicate.prototype.add = function (description, predicate) {\n            this._descriptions.push(description);\n            this._predicates.push(predicate);\n            return this;\n        };\n        /**\n         * Adds a predicate function that depends on an option value to be run against candidate\n         * harnesses. If the option value is undefined, the predicate will be ignored.\n         * @param name The name of the option (may be used in error messages).\n         * @param option The option value.\n         * @param predicate The predicate function to run if the option value is not undefined.\n         * @return this (for method chaining).\n         */\n        HarnessPredicate.prototype.addOption = function (name, option, predicate) {\n            // Add quotes around strings to differentiate them from other values\n            var value = typeof option === 'string' ? \"\\\"\" + option + \"\\\"\" : \"\" + option;\n            if (option !== undefined) {\n                this.add(name + \" = \" + value, function (item) { return predicate(item, option); });\n            }\n            return this;\n        };\n        /**\n         * Filters a list of harnesses on this predicate.\n         * @param harnesses The list of harnesses to filter.\n         * @return A list of harnesses that satisfy this predicate.\n         */\n        HarnessPredicate.prototype.filter = function (harnesses) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var results;\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, Promise.all(harnesses.map(function (h) { return _this.evaluate(h); }))];\n                        case 1:\n                            results = _a.sent();\n                            return [2 /*return*/, harnesses.filter(function (_, i) { return results[i]; })];\n                    }\n                });\n            });\n        };\n        /**\n         * Evaluates whether the given harness satisfies this predicate.\n         * @param harness The harness to check\n         * @return A promise that resolves to true if the harness satisfies this predicate,\n         *   and resolves to false otherwise.\n         */\n        HarnessPredicate.prototype.evaluate = function (harness) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var results;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, Promise.all(this._predicates.map(function (p) { return p(harness); }))];\n                        case 1:\n                            results = _a.sent();\n                            return [2 /*return*/, results.reduce(function (combined, current) { return combined && current; }, true)];\n                    }\n                });\n            });\n        };\n        /** Gets a description of this predicate for use in error messages. */\n        HarnessPredicate.prototype.getDescription = function () {\n            return this._descriptions.join(', ');\n        };\n        /** Gets the selector used to find candidate elements. */\n        HarnessPredicate.prototype.getSelector = function () {\n            var _this = this;\n            return this._ancestor.split(',')\n                .map(function (part) { return (part.trim() + \" \" + _this.harnessType.hostSelector).trim(); })\n                .join(',');\n        };\n        /** Adds base options common to all harness types. */\n        HarnessPredicate.prototype._addBaseOptions = function (options) {\n            var _this = this;\n            this._ancestor = options.ancestor || '';\n            if (this._ancestor) {\n                this._descriptions.push(\"has ancestor matching selector \\\"\" + this._ancestor + \"\\\"\");\n            }\n            var selector = options.selector;\n            if (selector !== undefined) {\n                this.add(\"host matches selector \\\"\" + selector + \"\\\"\", function (item) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                    return tslib_1.__generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [4 /*yield*/, item.host()];\n                            case 1: return [2 /*return*/, (_a.sent()).matchesSelector(selector)];\n                        }\n                    });\n                }); });\n            }\n        };\n        return HarnessPredicate;\n    }());\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Creates a browser MouseEvent with the specified options.\n     * @docs-private\n     */\n    function createMouseEvent(type, x, y, button) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (button === void 0) { button = 0; }\n        var event = document.createEvent('MouseEvent');\n        var originalPreventDefault = event.preventDefault;\n        event.initMouseEvent(type, true, /* canBubble */ true, /* cancelable */ window, /* view */ 0, /* detail */ x, /* screenX */ y, /* screenY */ x, /* clientX */ y, /* clientY */ false, /* ctrlKey */ false, /* altKey */ false, /* shiftKey */ false, /* metaKey */ button, /* button */ null /* relatedTarget */);\n        // `initMouseEvent` doesn't allow us to pass the `buttons` and\n        // defaults it to 0 which looks like a fake event.\n        Object.defineProperty(event, 'buttons', { get: function () { return 1; } });\n        // IE won't set `defaultPrevented` on synthetic events so we need to do it manually.\n        event.preventDefault = function () {\n            Object.defineProperty(event, 'defaultPrevented', { get: function () { return true; } });\n            return originalPreventDefault.apply(this, arguments);\n        };\n        return event;\n    }\n    /**\n     * Creates a browser TouchEvent with the specified pointer coordinates.\n     * @docs-private\n     */\n    function createTouchEvent(type, pageX, pageY) {\n        if (pageX === void 0) { pageX = 0; }\n        if (pageY === void 0) { pageY = 0; }\n        // In favor of creating events that work for most of the browsers, the event is created\n        // as a basic UI Event. The necessary details for the event will be set manually.\n        var event = document.createEvent('UIEvent');\n        var touchDetails = { pageX: pageX, pageY: pageY };\n        // TS3.6 removes the initUIEvent method and suggests porting to \"new UIEvent()\".\n        event.initUIEvent(type, true, true, window, 0);\n        // Most of the browsers don't have a \"initTouchEvent\" method that can be used to define\n        // the touch details.\n        Object.defineProperties(event, {\n            touches: { value: [touchDetails] },\n            targetTouches: { value: [touchDetails] },\n            changedTouches: { value: [touchDetails] }\n        });\n        return event;\n    }\n    /**\n     * Dispatches a keydown event from an element.\n     * @docs-private\n     */\n    function createKeyboardEvent(type, keyCode, key, target, modifiers) {\n        if (keyCode === void 0) { keyCode = 0; }\n        if (key === void 0) { key = ''; }\n        if (modifiers === void 0) { modifiers = {}; }\n        var event = document.createEvent('KeyboardEvent');\n        var originalPreventDefault = event.preventDefault;\n        // Firefox does not support `initKeyboardEvent`, but supports `initKeyEvent`.\n        if (event.initKeyEvent) {\n            event.initKeyEvent(type, true, true, window, modifiers.control, modifiers.alt, modifiers.shift, modifiers.meta, keyCode);\n        }\n        else {\n            // `initKeyboardEvent` expects to receive modifiers as a whitespace-delimited string\n            // See https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/initKeyboardEvent\n            var modifiersStr = (modifiers.control ? 'Control ' : '' + modifiers.alt ? 'Alt ' : '' +\n                modifiers.shift ? 'Shift ' : '' + modifiers.meta ? 'Meta' : '').trim();\n            event.initKeyboardEvent(type, true, /* canBubble */ true, /* cancelable */ window, /* view */ 0, /* char */ key, /* key */ 0, /* location */ modifiersStr, /* modifiersList */ false /* repeat */);\n        }\n        // Webkit Browsers don't set the keyCode when calling the init function.\n        // See related bug https://bugs.webkit.org/show_bug.cgi?id=16735\n        Object.defineProperties(event, {\n            keyCode: { get: function () { return keyCode; } },\n            key: { get: function () { return key; } },\n            target: { get: function () { return target; } },\n            ctrlKey: { get: function () { return !!modifiers.control; } },\n            altKey: { get: function () { return !!modifiers.alt; } },\n            shiftKey: { get: function () { return !!modifiers.shift; } },\n            metaKey: { get: function () { return !!modifiers.meta; } }\n        });\n        // IE won't set `defaultPrevented` on synthetic events so we need to do it manually.\n        event.preventDefault = function () {\n            Object.defineProperty(event, 'defaultPrevented', { get: function () { return true; } });\n            return originalPreventDefault.apply(this, arguments);\n        };\n        return event;\n    }\n    /**\n     * Creates a fake event object with any desired event type.\n     * @docs-private\n     */\n    function createFakeEvent(type, canBubble, cancelable) {\n        if (canBubble === void 0) { canBubble = false; }\n        if (cancelable === void 0) { cancelable = true; }\n        var event = document.createEvent('Event');\n        event.initEvent(type, canBubble, cancelable);\n        return event;\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Utility to dispatch any event on a Node.\n     * @docs-private\n     */\n    function dispatchEvent(node, event) {\n        node.dispatchEvent(event);\n        return event;\n    }\n    /**\n     * Shorthand to dispatch a fake event on a specified node.\n     * @docs-private\n     */\n    function dispatchFakeEvent(node, type, canBubble) {\n        return dispatchEvent(node, createFakeEvent(type, canBubble));\n    }\n    /**\n     * Shorthand to dispatch a keyboard event with a specified key code.\n     * @docs-private\n     */\n    function dispatchKeyboardEvent(node, type, keyCode, key, target, modifiers) {\n        return dispatchEvent(node, createKeyboardEvent(type, keyCode, key, target, modifiers));\n    }\n    /**\n     * Shorthand to dispatch a mouse event on the specified coordinates.\n     * @docs-private\n     */\n    function dispatchMouseEvent(node, type, x, y, event) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        if (event === void 0) { event = createMouseEvent(type, x, y); }\n        return dispatchEvent(node, event);\n    }\n    /**\n     * Shorthand to dispatch a touch event on the specified coordinates.\n     * @docs-private\n     */\n    function dispatchTouchEvent(node, type, x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        return dispatchEvent(node, createTouchEvent(type, x, y));\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function triggerFocusChange(element, event) {\n        var eventFired = false;\n        var handler = function () { return eventFired = true; };\n        element.addEventListener(event, handler);\n        element[event]();\n        element.removeEventListener(event, handler);\n        if (!eventFired) {\n            dispatchFakeEvent(element, event);\n        }\n    }\n    /**\n     * Patches an elements focus and blur methods to emit events consistently and predictably.\n     * This is necessary, because some browsers, like IE11, will call the focus handlers asynchronously,\n     * while others won't fire them at all if the browser window is not focused.\n     * @docs-private\n     */\n    function patchElementFocus(element) {\n        element.focus = function () { return dispatchFakeEvent(element, 'focus'); };\n        element.blur = function () { return dispatchFakeEvent(element, 'blur'); };\n    }\n    /** @docs-private */\n    function triggerFocus(element) {\n        triggerFocusChange(element, 'focus');\n    }\n    /** @docs-private */\n    function triggerBlur(element) {\n        triggerFocusChange(element, 'blur');\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Base harness environment class that can be extended to allow `ComponentHarness`es to be used in\n     * different test environments (e.g. testbed, protractor, etc.). This class implements the\n     * functionality of both a `HarnessLoader` and `LocatorFactory`. This class is generic on the raw\n     * element type, `E`, used by the particular test environment.\n     */\n    var HarnessEnvironment = /** @class */ (function () {\n        function HarnessEnvironment(rawRootElement) {\n            this.rawRootElement = rawRootElement;\n            this.rootElement = this.createTestElement(rawRootElement);\n        }\n        // Implemented as part of the `LocatorFactory` interface.\n        HarnessEnvironment.prototype.documentRootLocatorFactory = function () {\n            return this.createEnvironment(this.getDocumentRoot());\n        };\n        HarnessEnvironment.prototype.locatorFor = function (arg) {\n            var _this = this;\n            return function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var _a;\n                return tslib_1.__generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            if (!(typeof arg === 'string')) return [3 /*break*/, 2];\n                            _a = this.createTestElement;\n                            return [4 /*yield*/, this._assertElementFound(arg)];\n                        case 1: return [2 /*return*/, _a.apply(this, [_b.sent()])];\n                        case 2: return [2 /*return*/, this._assertHarnessFound(arg)];\n                    }\n                });\n            }); };\n        };\n        HarnessEnvironment.prototype.locatorForOptional = function (arg) {\n            var _this = this;\n            return function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var element, candidates;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!(typeof arg === 'string')) return [3 /*break*/, 2];\n                            return [4 /*yield*/, this.getAllRawElements(arg)];\n                        case 1:\n                            element = (_a.sent())[0];\n                            return [2 /*return*/, element ? this.createTestElement(element) : null];\n                        case 2: return [4 /*yield*/, this._getAllHarnesses(arg)];\n                        case 3:\n                            candidates = _a.sent();\n                            return [2 /*return*/, candidates[0] || null];\n                    }\n                });\n            }); };\n        };\n        HarnessEnvironment.prototype.locatorForAll = function (arg) {\n            var _this = this;\n            return function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!(typeof arg === 'string')) return [3 /*break*/, 2];\n                            return [4 /*yield*/, this.getAllRawElements(arg)];\n                        case 1: return [2 /*return*/, (_a.sent()).map(function (e) { return _this.createTestElement(e); })];\n                        case 2: return [2 /*return*/, this._getAllHarnesses(arg)];\n                    }\n                });\n            }); };\n        };\n        // Implemented as part of the `LocatorFactory` interface.\n        HarnessEnvironment.prototype.harnessLoaderFor = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var _a;\n                return tslib_1.__generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _a = this.createEnvironment;\n                            return [4 /*yield*/, this._assertElementFound(selector)];\n                        case 1: return [2 /*return*/, _a.apply(this, [_b.sent()])];\n                    }\n                });\n            });\n        };\n        // Implemented as part of the `LocatorFactory` interface.\n        HarnessEnvironment.prototype.harnessLoaderForOptional = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var elements;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.getAllRawElements(selector)];\n                        case 1:\n                            elements = _a.sent();\n                            return [2 /*return*/, elements[0] ? this.createEnvironment(elements[0]) : null];\n                    }\n                });\n            });\n        };\n        // Implemented as part of the `LocatorFactory` interface.\n        HarnessEnvironment.prototype.harnessLoaderForAll = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var elements;\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.getAllRawElements(selector)];\n                        case 1:\n                            elements = _a.sent();\n                            return [2 /*return*/, elements.map(function (element) { return _this.createEnvironment(element); })];\n                    }\n                });\n            });\n        };\n        // Implemented as part of the `HarnessLoader` interface.\n        HarnessEnvironment.prototype.getHarness = function (harnessType) {\n            return this.locatorFor(harnessType)();\n        };\n        // Implemented as part of the `HarnessLoader` interface.\n        HarnessEnvironment.prototype.getAllHarnesses = function (harnessType) {\n            return this.locatorForAll(harnessType)();\n        };\n        // Implemented as part of the `HarnessLoader` interface.\n        HarnessEnvironment.prototype.getChildLoader = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var _a;\n                return tslib_1.__generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _a = this.createEnvironment;\n                            return [4 /*yield*/, this._assertElementFound(selector)];\n                        case 1: return [2 /*return*/, _a.apply(this, [_b.sent()])];\n                    }\n                });\n            });\n        };\n        // Implemented as part of the `HarnessLoader` interface.\n        HarnessEnvironment.prototype.getAllChildLoaders = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.getAllRawElements(selector)];\n                        case 1: return [2 /*return*/, (_a.sent()).map(function (e) { return _this.createEnvironment(e); })];\n                    }\n                });\n            });\n        };\n        /** Creates a `ComponentHarness` for the given harness type with the given raw host element. */\n        HarnessEnvironment.prototype.createComponentHarness = function (harnessType, element) {\n            return new harnessType(this.createEnvironment(element));\n        };\n        HarnessEnvironment.prototype._getAllHarnesses = function (harnessType) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var harnessPredicate, elements;\n                var _this = this;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            harnessPredicate = harnessType instanceof HarnessPredicate ?\n                                harnessType : new HarnessPredicate(harnessType, {});\n                            return [4 /*yield*/, this.getAllRawElements(harnessPredicate.getSelector())];\n                        case 1:\n                            elements = _a.sent();\n                            return [2 /*return*/, harnessPredicate.filter(elements.map(function (element) { return _this.createComponentHarness(harnessPredicate.harnessType, element); }))];\n                    }\n                });\n            });\n        };\n        HarnessEnvironment.prototype._assertElementFound = function (selector) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var element;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this.getAllRawElements(selector)];\n                        case 1:\n                            element = (_a.sent())[0];\n                            if (!element) {\n                                throw Error(\"Expected to find element matching selector: \\\"\" + selector + \"\\\", but none was found\");\n                            }\n                            return [2 /*return*/, element];\n                    }\n                });\n            });\n        };\n        HarnessEnvironment.prototype._assertHarnessFound = function (harnessType) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var harness;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, this._getAllHarnesses(harnessType)];\n                        case 1:\n                            harness = (_a.sent())[0];\n                            if (!harness) {\n                                throw _getErrorForMissingHarness(harnessType);\n                            }\n                            return [2 /*return*/, harness];\n                    }\n                });\n            });\n        };\n        return HarnessEnvironment;\n    }());\n    function _getErrorForMissingHarness(harnessType) {\n        var harnessPredicate = harnessType instanceof HarnessPredicate ? harnessType : new HarnessPredicate(harnessType, {});\n        var _a = harnessPredicate.harnessType, name = _a.name, hostSelector = _a.hostSelector;\n        var restrictions = harnessPredicate.getDescription();\n        var message = \"Expected to find element for \" + name + \" matching selector: \\\"\" + hostSelector + \"\\\"\";\n        if (restrictions) {\n            message += \" (with restrictions: \" + restrictions + \")\";\n        }\n        message += ', but none was found';\n        return Error(message);\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    (function (TestKey) {\n        TestKey[TestKey[\"BACKSPACE\"] = 0] = \"BACKSPACE\";\n        TestKey[TestKey[\"TAB\"] = 1] = \"TAB\";\n        TestKey[TestKey[\"ENTER\"] = 2] = \"ENTER\";\n        TestKey[TestKey[\"SHIFT\"] = 3] = \"SHIFT\";\n        TestKey[TestKey[\"CONTROL\"] = 4] = \"CONTROL\";\n        TestKey[TestKey[\"ALT\"] = 5] = \"ALT\";\n        TestKey[TestKey[\"ESCAPE\"] = 6] = \"ESCAPE\";\n        TestKey[TestKey[\"PAGE_UP\"] = 7] = \"PAGE_UP\";\n        TestKey[TestKey[\"PAGE_DOWN\"] = 8] = \"PAGE_DOWN\";\n        TestKey[TestKey[\"END\"] = 9] = \"END\";\n        TestKey[TestKey[\"HOME\"] = 10] = \"HOME\";\n        TestKey[TestKey[\"LEFT_ARROW\"] = 11] = \"LEFT_ARROW\";\n        TestKey[TestKey[\"UP_ARROW\"] = 12] = \"UP_ARROW\";\n        TestKey[TestKey[\"RIGHT_ARROW\"] = 13] = \"RIGHT_ARROW\";\n        TestKey[TestKey[\"DOWN_ARROW\"] = 14] = \"DOWN_ARROW\";\n        TestKey[TestKey[\"INSERT\"] = 15] = \"INSERT\";\n        TestKey[TestKey[\"DELETE\"] = 16] = \"DELETE\";\n        TestKey[TestKey[\"F1\"] = 17] = \"F1\";\n        TestKey[TestKey[\"F2\"] = 18] = \"F2\";\n        TestKey[TestKey[\"F3\"] = 19] = \"F3\";\n        TestKey[TestKey[\"F4\"] = 20] = \"F4\";\n        TestKey[TestKey[\"F5\"] = 21] = \"F5\";\n        TestKey[TestKey[\"F6\"] = 22] = \"F6\";\n        TestKey[TestKey[\"F7\"] = 23] = \"F7\";\n        TestKey[TestKey[\"F8\"] = 24] = \"F8\";\n        TestKey[TestKey[\"F9\"] = 25] = \"F9\";\n        TestKey[TestKey[\"F10\"] = 26] = \"F10\";\n        TestKey[TestKey[\"F11\"] = 27] = \"F11\";\n        TestKey[TestKey[\"F12\"] = 28] = \"F12\";\n        TestKey[TestKey[\"META\"] = 29] = \"META\";\n    })(exports.TestKey || (exports.TestKey = {}));\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Checks whether the given Element is a text input element.\n     * @docs-private\n     */\n    function isTextInput(element) {\n        return element.nodeName.toLowerCase() === 'input' ||\n            element.nodeName.toLowerCase() === 'textarea';\n    }\n    function typeInElement(element) {\n        var e_1, _a;\n        var modifiersAndKeys = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            modifiersAndKeys[_i - 1] = arguments[_i];\n        }\n        var first = modifiersAndKeys[0];\n        var modifiers;\n        var rest;\n        if (typeof first !== 'string' && first.keyCode === undefined && first.key === undefined) {\n            modifiers = first;\n            rest = modifiersAndKeys.slice(1);\n        }\n        else {\n            modifiers = {};\n            rest = modifiersAndKeys;\n        }\n        var keys = rest\n            .map(function (k) { return typeof k === 'string' ?\n            k.split('').map(function (c) { return ({ keyCode: c.toUpperCase().charCodeAt(0), key: c }); }) : [k]; })\n            .reduce(function (arr, k) { return arr.concat(k); }, []);\n        triggerFocus(element);\n        try {\n            for (var keys_1 = tslib_1.__values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n                var key = keys_1_1.value;\n                dispatchKeyboardEvent(element, 'keydown', key.keyCode, key.key, element, modifiers);\n                dispatchKeyboardEvent(element, 'keypress', key.keyCode, key.key, element, modifiers);\n                if (isTextInput(element) && key.key && key.key.length === 1) {\n                    element.value += key.key;\n                    dispatchFakeEvent(element, 'input');\n                }\n                dispatchKeyboardEvent(element, 'keyup', key.keyCode, key.key, element, modifiers);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    /**\n     * Clears the text in an input or textarea element.\n     * @docs-private\n     */\n    function clearElement(element) {\n        triggerFocus(element);\n        element.value = '';\n        dispatchFakeEvent(element, 'input');\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    exports.ComponentHarness = ComponentHarness;\n    exports.HarnessPredicate = HarnessPredicate;\n    exports.dispatchEvent = dispatchEvent;\n    exports.dispatchFakeEvent = dispatchFakeEvent;\n    exports.dispatchKeyboardEvent = dispatchKeyboardEvent;\n    exports.dispatchMouseEvent = dispatchMouseEvent;\n    exports.dispatchTouchEvent = dispatchTouchEvent;\n    exports.patchElementFocus = patchElementFocus;\n    exports.triggerFocus = triggerFocus;\n    exports.triggerBlur = triggerBlur;\n    exports.createMouseEvent = createMouseEvent;\n    exports.createTouchEvent = createTouchEvent;\n    exports.createKeyboardEvent = createKeyboardEvent;\n    exports.createFakeEvent = createFakeEvent;\n    exports.HarnessEnvironment = HarnessEnvironment;\n    exports.isTextInput = isTextInput;\n    exports.typeInElement = typeInElement;\n    exports.clearElement = clearElement;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=cdk-testing.umd.js.map\n"]}